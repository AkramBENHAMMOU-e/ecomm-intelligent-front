<div class="chat-assistant">
  <!-- Floating Button -->
  <button class="chat-button" (click)="toggleChat()" [class.active]="isOpen">
    <span class="chat-icon" *ngIf="!isOpen">ğŸ’¬</span>
    <span class="close-icon" *ngIf="isOpen">âœ•</span>
  </button>

  <!-- Chat Window -->
  <div class="chat-window" [class.open]="isOpen">
    <!-- Header -->
    <div class="chat-header">
      <div class="chat-header-content">
        <div class="chat-avatar">ğŸ¤–</div>
        <div class="chat-header-text">
          <h3>Assistant Virtuel</h3>
          <span class="status">En ligne</span>
        </div>
      </div>
      <button class="minimize-btn" (click)="toggleChat()">âˆ’</button>
    </div>

    <!-- Body -->
    <div class="chat-body">
      <div class="messages-container">
        <div 
          *ngFor="let message of messages" 
          class="message-wrapper"
          [class.user-message]="message.sender === 'user'"
          [class.bot-message]="message.sender === 'bot'"
        >
          <div class="message-bubble">
            <div class="message-text">{{ message.text }}</div>
            <div class="message-time">{{ formatTime(message.timestamp) }}</div>
          </div>
        </div>

        <!-- Typing Indicator -->
        <div class="message-wrapper bot-message" *ngIf="isTyping">
          <div class="message-bubble typing-indicator">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="chat-footer">
      <div class="input-container">
        <input 
          type="text" 
          class="chat-input" 
          [(ngModel)]="userInput"
          (keyup.enter)="sendMessage()"
          placeholder="Tapez votre message..."
          [disabled]="isTyping"
        />
        <button 
          class="send-btn" 
          (click)="sendMessage()"
          [disabled]="!userInput.trim() || isTyping"
        >
          <span class="send-icon">â¤</span>
        </button>
      </div>
      <div class="quick-actions">
        <button class="quick-btn" (click)="userInput = 'Quels produits avez-vous?'; sendMessage()">
          ğŸ›ï¸ Produits
        </button>
        <button class="quick-btn" (click)="userInput = 'Comment passer une commande?'; sendMessage()">
          ğŸ“¦ Commander
        </button>
        <button class="quick-btn" (click)="userInput = 'Aide'; sendMessage()">
          â“ Aide
        </button>
      </div>
    </div>
  </div>
</div>
